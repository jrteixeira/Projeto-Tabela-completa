<html lang="en">
<head>
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/style.css" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
    </script>
</head>
<body>
    <div class="panel-container">
        <div class="ui grid centered" style="height: 100px; margin-bottom: 1rem;">
            <div class="sixteen wide three wide tablet two wide computer column bg-green centered-text" style="margin: .5rem; border-radius: 5px; padding-top: 0.6rem;">
                <i class="check circle icon large" style="color: white;"></i>
                <span style="display: block;color: white; font-size: small; margin-bottom: 0.4rem;">Ativos</span>
                <span id="ativo_id" style="color: white;font-weight: bold;font-size: large;"></span>
            </div>
            <div class="sixteen wide three wide tablet two wide computer column bg-blue centered-text" style="margin: .5rem; border-radius: 5px; padding-top: 0.6rem;">
                <i class="exclamation triangle icon large" style="color: white;"></i>
                <span style="display: block;color: white; font-size: small; margin-bottom: 0.4rem;">Aguardando Ativação</span>
                <span id="aguardando_ativacao_id" style="color: white;font-weight: bold;font-size: large;"></span>
            </div>
            <div class="sixteen wide three wide tablet two wide computer column bg-orange centered-text" style="margin: .5rem; border-radius: 5px; padding-top: 0.6rem;">
                <i class="times circle icon large" style="color: white;"></i>
                <span style="display: block;color: white; font-size: small; margin-bottom: 0.4rem;">Em viagem</span>
                <span id="em_viagem_id" style="color: white;font-weight: bold;font-size: large;"></span>
            </div>
        </div>
        <div id="popup_selectColumns" class="ui custom popup top left transition hidden columns">
            <div class="ui checkbox clear" id="clear_checkbox"><input type="checkbox" style="margin-left: 30px;margin-top: 4px;" onclick="limpaCheckBoxOcultaColunas()"><label>Limpar filtros</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_status" name="status" onclick=""><label for="id_status">status</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_acoes" name="acoes" onclick=""><label for="id_acoes">acoes</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_serial" name="serial" onclick=""><label for="id_serial">serial</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_placa" name="placa" onclick=""><label for="id_placa">placa</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_grupoVeiculo" name="grupoVeiculo" onclick=""><label for="id_grupoVeiculo">Grupo de veiculo</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_dtComunicacao" name="dtComunicacao" onclick=""><label for="id_dtComunicacao">Data comunicação</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_dtPosicao" name="dtPosicao" onclick=""><label for="id_dtPosicao">Data posição</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_enderecoPosicao" name="enderecoPosicao" onclick=""><label for="id_enderecoPosicao">Endereço de posição</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_longitude" name="longitude" onclick=""><label for="id_longitude">Longitude</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_latitude" name="latitude" onclick=""><label for="id_latitude">Latitude</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_eventos" name="eventos" onclick=""><label for="id_eventos">eventos</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_dtEvento" name="dtEvento" onclick=""><label for="id_dtEvento">Data evento</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_sinalValido" name="sinalValido" onclick=""><label for="id_sinalValido">sinal valido</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_itvlPosicao" name="itvlPosicao" onclick=""><label for="id_itvlPosicao">Intervalo de Posição</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_itvlPosicaoSleepAtual" name="itvlPosicaoSleepAtual" onclick=""><label for="id_itvlPosicaoSleepAtual">Intervalo de Posição sleep atual</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_itvlPosicaoSleepAnterior" name="itvlPosicaoSleepAnterior" onclick=""><label for="id_itvlPosicaoSleepAnterior">Intervalo de Posição sleep anterior</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_tipoIsca" name="tipoIsca" onclick=""><label for="id_tipoIsca">Tipo de Isca</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_dadosLBS" name="dadosLBS" onclick=""><label for="id_dadosLBS">Dados LBS</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_sinalgsm" name="sinalgsm" onclick=""><label for="id_sinalgsm">Nivel de sinal GSM</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_dtExpiracao" name="dtExpiracao" onclick=""><label for="id_dtExpiracao">Data de Expiração Isca</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_diasExpiracao" name="diasExpiracao" onclick=""><label for="id_diasExpiracao">Dias de Expiração Isca</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_temperatura" name="temperatura" onclick=""><label for="id_temperatura">Temperatura</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_rfLigado" name="rfLigado" onclick=""><label for="id_rfLigado">RF ligado</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_frequencia" name="frequencia" onclick=""><label for="id_frequencia">Frequência</label></div>
            <div class="ui checkbox hide"><input type="checkbox" id="id_bateria" name="bateria" onclick=""><label for="id_bateria">Bateria da isca</label></div>
            </div>
            <h1 style="text-align: center; margin-bottom: 3rem;">Tabela dinamica</h1>
            <div class="ui grid">
                <div class="eight wide tablet  three wide computer column p-l-0">
                    <button class="ui fluid button selectColumns margin-r-1 margin-b-1">
                        <i class="eye slash outline icon" style="color: black;"></i>
                        Ocultar colunas
                    </button>
                </div>
               
                <div class="eight wide tablet  three wide computer column">
                    <button id="btn_limpa_Filtros" class="ui fluid blue button margin-b-1" onclick="limpaFiltros()">Limpa filtros</button>
                </div>
                <div class="eight wide two wide computer column right floated">
                    <a id="btn_return" class="ui circular blue icon button margin-b-1 right floated" onclick="scrollToSection()">
                    <i class="reply icon large" style="color: white;"></i>
                    </a>
                </div>
            </div>
    </div>

    <div class="table-responsive">
            
        
        <div class="table-container">
        <table id="tabela_criada"  class="ui unstackable table striped celled" style="width: auto; border-top: none;">
            <thead>
                <tr>
                    <th id="header_status" class="max-w" name="status" draggable="true">
                        <i class="icon search check status"></i>
                        <label for="">Status</label>
                        <div id="popup_status" class="ui custom popup top left transition hidden"></div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_acoes" class="max-w" name="acoes" draggable="true">
                        <label for="">Ações</label>
                    </th>
                    <th id="header_serial" class="max-w" name="serial" draggable="true">
                        <i id="search_serial" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Serial</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="letter" placeholder="Procurar por serial">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_placa" class="max-w" name="placa" draggable="true">
                        <i id="search_placa" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Placa</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="letter" placeholder="Procurar por placa">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_grupoVeiculo" class="max-w" name="grupoVeiculo" draggable="true">
                        <i id="search_grupoVeiculo" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Grupo de veiculo</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="letter" placeholder="Procurar por grupo veiculo">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_dtComunicacao" class="max-w" name="dtComunicacao" draggable="true">
                        <i id="search_dtComunicacao" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Data comunicação</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="date" placeholder="Procurar por data de comunicação">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_dtPosicao" class="max-w" name="dtPosicao" draggable="true">
                        <i id="search_dtPosicao" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Data posição</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="date" placeholder="Procurar por data de posição">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_enderecoPosicao" class="max-w" name="enderecoPosicao" draggable="true">
                        <i id="search_enderecoPosicao" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Endereço posição</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="letter" placeholder="Procurar por Endereço">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_longitude" class="max-w" name="longitude" draggable="true">
                        <label for="">Longitude</label>
                    </th>
                    <th id="header_latitude" class="max-w" name="latitude" draggable="true">
                        <label for="">Latitude</label>
                    </th>
                    <th id="header_eventos" class="max-w" name="eventos" draggable="true">
                        <i class="icon search check eventos"></i>
                        <label for="">Eventos</label>
                        <div id="popup_eventos" class="ui custom popup top left transition hidden"></div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_dtEvento" class="max-w" name="dtEvento" draggable="true">
                        <i id="search_dtEvento" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Data evento</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="date" placeholder="Procurar por data do evento">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_sinalValido" class="max-w" name="sinalValido" draggable="true">
                        <label for="">Sinal valido</label>
                        <i class="icon search check sinalValido"></i>
                        <div id="popup_sinalValido" class="ui custom popup right left transition hidden"></div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_itvlPosicao" class="max-w" name="itvlPosicao" draggable="true">
                        <i id="search_itvlPosicao" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Intervalo de Posição</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="value" placeholder="Intervalo de posição">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_itvlPosicaoSleepAtual" class="max-w" name="itvlPosicaoSleepAtual" draggable="true">
                        <i id="search_itvlPosicaoSleepAtual" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Intervalo de Posição sleep atual</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="value" placeholder="Intervalo de Posição sleep atual">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_itvlPosicaoSleepAnterior" class="max-w" name="itvlPosicaoSleepAnterior" draggable="true">
                        <i id="search_itvlPosicaoSleepAnterior" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Intervalo de Posição sleep anterior</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="value" placeholder="Intervalo de Posição sleep atual">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_tipoIsca" class="max-w" name="tipoIsca" draggable="true">
                        <i class="icon search check tipoIsca"></i>
                        <label for="">Tipo de isca</label>
                        <div id="popup_tipoIsca" class="ui custom popup top left transition hidden"></div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_dadosLBS" class="max-w" name="dadosLBS" draggable="true">
                        <label for="">Dados LBS</label>
                    </th>
                    <th id="header_sinalgsm" class="max-w" name="sinalgsm" draggable="true">
                        <i class="icon search check sinalgsm"></i>
                        <label for="">Nivel de sinal GSM</label>
                        <div id="popup_sinalgsm" class="ui custom popup top left transition hidden"></div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_dtExpiracao" class="max-w" name="dtExpiracao" draggable="true">
                        <i id="search_dtExpiracao" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Data Expiração isca</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="date" placeholder="Procurar por data de expiração">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_diasExpiracao" class="max-w" name="diasExpiracao" draggable="true">
                        <i id="search_diasExpiracao" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Dias de expiraçao da isca</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="value" placeholder="pesquisar por dia de expiração">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_temperatura" class="max-w" name="temperatura" draggable="true">
                        <i id="search_temperatura" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Temperatura</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="value" placeholder="pesquisar por temperatura">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_rfLigado" class="max-w" name="rfLigado" draggable="true">
                        <i class="icon search check rfLigado"></i>
                        <label for="">RF ligado</label>
                        <div id="popup_rfLigado" class="ui custom popup top left transition hidden"></div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_frequencia" class="max-w" name="frequencia" draggable="true">
                        <i id="search_frequencia" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Frequência</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="value" placeholder="pesquisar por frequencia">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                    <th id="header_bateria" class="max-w" name="bateria" draggable="true">
                        <i id="search_bateria" class="search icon" style="color: #b7b7b8;  margin: .87rem 0;"></i>
                        <label class="p-x-1">Bateria da isca</label>
                        <div class="ui action input d-none p-r-1">
                            <input type="text" class="value" placeholder="porcentagem de bateria">
                            <button class="ui icon button">
                                <i class="reply icon"></i>
                            </button>
                        </div>
                        <i class="sort alphabet up icon"></i>
                    </th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
    </div>
    <script src="js/script.js"></script>
    <script id="scriptAuxiliar">
        // <![CDATA[
        // Ativação de popup para ocultar tabelas
        $('.ui.button.selectColumns')
        .popup({
            popup : $('#popup_selectColumns'),
            on    : 'click',
            position : 'right center'
        })
        ;
        // Ativação de popup status
        $('.icon.search.check.status')
        .popup({
            popup : $('#popup_status'),
            on    : 'click',
            position : 'bottom center'
        })
        ;
        // Ativação de popup eventos
        $('.icon.search.check.eventos')
        .popup({
            popup : $('#popup_eventos'),
            on    : 'click',
            position : 'bottom center'
        })
        ;
        // Ativação de popup eventos
        $('.icon.search.check.tipoIsca')
        .popup({
            popup : $('#popup_tipoIsca'),
            on    : 'click',
            position : 'bottom center'
        })
        ;
        // Ativação de popup Nivel de sinal GSM
        $('.icon.search.check.sinalgsm')
        .popup({
            popup : $('#popup_sinalgsm'),
            on    : 'click',
            position : 'bottom center'
        })
        ;
        // Ativação de popup Sinal valido
        $('.icon.search.check.sinalValido')
        .popup({
            popup : $('#popup_sinalValido'),
            on    : 'click',
            position : 'bottom center'
        })
        ;
         // Ativação de popup RF ligado
         $('.icon.search.check.rfLigado')
        .popup({
            popup : $('#popup_rfLigado'),
            on    : 'click',
            position : 'bottom center'
        })
        ;
        // ]]>
    </script>

<script id="scriptGeral">
    // <![CDATA[
    // ** Variaveis Gerais **
    
   
    const allHeadersInput = $('#tabela_criada thead .action.input input');
    // Click find input
    for(var i = 0; i < allHeadersInput.length; ++i){    
        var id = allHeadersInput[i].parentElement.parentElement.firstChild.nextSibling.getAttribute("id");
        var idCompleto = "#"+id;
        $(idCompleto).click(function(){
            $(this).addClass('d-none');
            $(this).siblings('label').addClass('d-none');
            $(this).siblings('.ui.input').removeClass('d-none');
        });
    };

    // Click find input voltar
    $(function(){
        $("#tabela_criada thead .action.input .icon.button").click(function(){
            
            var teste = this.parentElement;
            $(teste).addClass('d-none');
            $(teste).siblings('label').removeClass('d-none');
            $(teste).siblings('.search.icon').removeClass('d-none');
        });
    });

    
    
    const allCheckboxColumns = $('.ui.custom.popup.columns .ui.checkbox.hide'); // Array com todos os checkBox para ocultar colunas
    const allCheckboxFilter = $('thead .ui.custom.popup .ui.checkbox'); // Array com todos os checkBox
    const allSortIcons = $('thead tr th .sort.alphabet.icon'); // Array com todos os icones de ordenação
    const allHeaders = $('thead tr th'); // Array com todos os Headers
    

    // Insere funcao de filtro em cada checkBox
    for (var i = 0; i < allCheckboxFilter.length; ++i) {
        if(allCheckboxFilter[i].className == 'ui checkbox'){
            var idParametro = allCheckboxFilter[i].parentNode.getAttribute("id")
            var nameParametro = allCheckboxFilter[i].parentNode.parentNode.getAttribute("name")
            const name = allCheckboxFilter[i].firstChild.name;
            const id_name = document.getElementById('id_'+nameParametro+'_'+name);
            id_name.setAttribute('onClick', "filtroCheckbox()")
            $('#scriptGeral').innerText = 'var filtro_' + nameParametro;
        }
    };
    // Insere funcao de ocultar colunas em cada checkBox
    for (var i = 0; i < allCheckboxColumns.length; ++i) {
        if(allCheckboxColumns[i].className == 'ui checkbox hide'){
            var idParametro = allCheckboxColumns[i].firstChild.getAttribute("id")
            const id_name = document.getElementById(idParametro);
            id_name.setAttribute('onClick', "ocultaColunas()")
        }
    };

    // Insere funcao oredenacao em cada Header
    for(var i=0; i<allHeaders.length;i++){
        var indiceParametro = i;
        if(allHeaders[i].lastElementChild.classList.contains("sort")){
            allHeaders[i].lastElementChild.setAttribute('onClick', "sortTable("+indiceParametro+"); changeIcon("+indiceParametro+")")
        }
    }

    // Criando Variaveis que armazenam listas de acordo com cada coluna
    $(document).ready(function(){
        var script = document.createElement('script');
        for(var i = 0; i < allHeaders.length; i++){
            var aux = [];
            var varname = allHeaders[i].getAttribute("name");
            if(typeof "filtro_"+varname != 'undefined'){
                window[eval( "filtro_"+varname + " = aux ;" )]
            }
        }
        document.body.appendChild(script);
    });

populaTabela();
calculaQtdStatus()




</script>
</body>
</html>